'use strict';
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self['webpackHotUpdatecloud_clourier']('index', {
  /***/ './src/components/layout/index.tsx':
    /*!*****************************************!*\
  !*** ./src/components/layout/index.tsx ***!
  \*****************************************/
    /***/ function (module, __webpack_exports__, __webpack_require__) {
      eval(
        '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "MsgContext": function() { return /* binding */ MsgContext; }\n/* harmony export */ });\n/* harmony import */ var _douyinfe_semi_ui__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @douyinfe/semi-ui */ "./node_modules/@douyinfe/semi-ui/lib/cjs/index.js");\n/* harmony import */ var _douyinfe_semi_ui__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_douyinfe_semi_ui__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _components_sider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/sider */ "./src/components/layout/components/sider/index.tsx");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/main.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _fallback_loading__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../fallback-loading */ "./src/components/fallback-loading/index.tsx");\n/* harmony import */ var idb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! idb */ "./node_modules/idb/build/index.js");\n/* harmony import */ var _hooks_store__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/hooks/store */ "./src/hooks/store.ts");\n/* harmony import */ var _store_message_slice__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/store/message.slice */ "./src/store/message.slice.ts");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react/jsx-dev-runtime */ "./node_modules/react/jsx-dev-runtime.js");\n/* provided dependency */ var __react_refresh_utils__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js */ "./node_modules/@pmmmwh/react-refresh-webpack-plugin/lib/runtime/RefreshUtils.js");\n/* provided dependency */ var __react_refresh_error_overlay__ = __webpack_require__(/*! ./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js */ "./node_modules/@pmmmwh/react-refresh-webpack-plugin/overlay/index.js");\n__webpack_require__.$Refresh$.runtime = __webpack_require__(/*! ./node_modules/react-refresh/runtime.js */ "./node_modules/react-refresh/runtime.js");\n\nvar _jsxFileName = "E:\\\\project\\\\cloud-courier\\\\src\\\\components\\\\layout\\\\index.tsx",\n    _this = undefined,\n    _s = __webpack_require__.$Refresh$.signature();\n\n\n\n\n\n\n\n\n\n\n\nvar MsgContext = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)([]);\n/* harmony default export */ __webpack_exports__["default"] = (_s(function () {\n  _s();\n\n  var dispatch = (0,_hooks_store__WEBPACK_IMPORTED_MODULE_4__.useAppDispatch)();\n  var Content = _douyinfe_semi_ui__WEBPACK_IMPORTED_MODULE_7__.Layout.Content;\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    var sharedworker = new SharedWorker("".concat("http://localhost:9000", "/sharedwork.js"));\n\n    sharedworker.port.onmessage = function (e) {\n      console.log("\\u4E3B\\u7EBF\\u7A0B \\uFF1A".concat(e.data));\n    };\n\n    var webSocketState = WebSocket.CONNECTING;\n    var broadcastChannel = new BroadcastChannel(\'WebSocketChannel\');\n    broadcastChannel.addEventListener(\'message\', function (event) {\n      switch (event.data.type) {\n        case \'WSState\':\n          webSocketState = event.data.state;\n          console.log(\'WebSocketState:\', webSocketState);\n          break;\n\n        case \'message\':\n          // 监听新消息的时间，来判断是否去传递新的消息\n          // setTime(event.data.timestamp);\n          dispatch((0,_store_message_slice__WEBPACK_IMPORTED_MODULE_5__.updateMessage)(event.data.message));\n          break;\n\n        case \'instance\':\n          // 监听新消息的时间，来判断是否去传递新的消息\n          console.log(event.data.instance);\n          break;\n\n        default:\n          break;\n      }\n    }); // 只用请求一次，防止请求两次导致WS连接失败\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    // 初始化消息\n    // TODO 无消息列表的时候会报错，带历史消息出来后再解决\n    (0,idb__WEBPACK_IMPORTED_MODULE_3__.openDB)(\'cloudCourier\').then(function (db) {\n      db.getAll(\'userList\').then(function (res) {\n        dispatch((0,_store_message_slice__WEBPACK_IMPORTED_MODULE_5__.updateMessage)(res));\n      });\n    });\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(_douyinfe_semi_ui__WEBPACK_IMPORTED_MODULE_7__.Layout, {\n    children: [/*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(_components_sider__WEBPACK_IMPORTED_MODULE_0__["default"], {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(_douyinfe_semi_ui__WEBPACK_IMPORTED_MODULE_7__.Layout, {\n      style: {\n        marginLeft: \'60px\'\n      },\n      children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(Content, {\n        children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n          fallback: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(_fallback_loading__WEBPACK_IMPORTED_MODULE_2__["default"], {\n            message: "\\u6B63\\u5728\\u52A0\\u8F7D\\u4E2D"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 31\n          }, _this),\n          children: /*#__PURE__*/(0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxDEV)(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.Outlet, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, _this);\n}, "NkhIhn1zg66j4NoEYTdniFiSz6s=", false, function () {\n  return [_hooks_store__WEBPACK_IMPORTED_MODULE_4__.useAppDispatch];\n}));\n\nvar $ReactRefreshModuleId$ = __webpack_require__.$Refresh$.moduleId;\nvar $ReactRefreshCurrentExports$ = __react_refresh_utils__.getModuleExports(\n\t$ReactRefreshModuleId$\n);\n\nfunction $ReactRefreshModuleRuntime$(exports) {\n\tif (true) {\n\t\tvar errorOverlay;\n\t\tif (typeof __react_refresh_error_overlay__ !== \'undefined\') {\n\t\t\terrorOverlay = __react_refresh_error_overlay__;\n\t\t}\n\t\tvar testMode;\n\t\tif (typeof __react_refresh_test__ !== \'undefined\') {\n\t\t\ttestMode = __react_refresh_test__;\n\t\t}\n\t\treturn __react_refresh_utils__.executeRuntime(\n\t\t\texports,\n\t\t\t$ReactRefreshModuleId$,\n\t\t\tmodule.hot,\n\t\t\terrorOverlay,\n\t\t\ttestMode\n\t\t);\n\t}\n}\n\nif (typeof Promise !== \'undefined\' && $ReactRefreshCurrentExports$ instanceof Promise) {\n\t$ReactRefreshCurrentExports$.then($ReactRefreshModuleRuntime$);\n} else {\n\t$ReactRefreshModuleRuntime$($ReactRefreshCurrentExports$);\n}\n\n//# sourceURL=webpack://cloud-clourier/./src/components/layout/index.tsx?',
      );

      /***/
    },
});
